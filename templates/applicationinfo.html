{% extends "base.html" %}
{% block content %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    function syncperformance(){
            // var dat = {
            // project:project,
            
            // };
            var uName='setup';
            var password='setup';
        // setTimeout(function(){
        //     $(check).prop("checked",)
        //     console.log("Happend")
        // },2000)
        //console.log($(e>'input[type=checkbox]:checked').length)
        
        $.ajax({
            
            type: 'GET',
            // data:dat,
            url: "http://localhost:8080/ecommerce/api/performance",
            headers: {
    "Authorization": "Basic " + btoa(uName + ":" + password)
  },
            contentType: 'application/json',
            success: function (data) {
                console.log(data)
                var obj = JSON.parse(data)
                // $("#card-body-container:last-child").remove()
                $('#card-body-container').append('\
                    <tr>\
                <td class="two wide column">Maximum memory</td>\
                <td>'+obj['Maximummemory']+'</td>\
              </tr>\
              <tr>\
                <td>Free memory</td>\
                <td>'+obj['Free memory']+'</td>\
              </tr>\
              <tr>\
                <td>Available Processors</td>\
                <td>'+obj['Available processors']+'</td>\
              </tr>\
                <tr>\
                <td>total memory</td>\
                <td>'+obj['Total memory']+'</td>\
              </tr>');
            }
        });
        

    }  
</script>
<!-- All Applications -->
<div class="main_content_iner ">

    <!-- Title -->
    <div class="container-fluid p-0">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <div class="white_card card_height_100 mb_30">
                    <div class="white_card_header">
                        <div class="box_header m-0">
                            <div class="main-title">
                                <h3 class="m-0">{{project.project_name}}</h3>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>


    <div class="container-fluid p-0">
          <h4 class="ui horizontal divider header">
            <i class="bar chart icon"></i>
            Application info
          </h4>
          <table class="ui definition table">
            <tbody>
              <tr>
                <td class="two wide column">Name</td>
                <td>{{project.project_name}}</td>
              </tr>
              <tr>
                <td>Database</td>
                <td>{{project.database_dialect}}</td>
              </tr>

              <tr>
                <td>Created Date</td>
                <td>{{project.curr_date}}</td>
              </tr>
            </tbody>
          </table>

    </div>

    <h4 class="ui horizontal divider header">
      </h4>


<!--Performance metrics -->
<form onclick="syncperformance()">
    <input type="button"  name="sync" ><i class="fa fa-sync"></i>
</form>

<div class="container-fluid p-0">
    <h4 class="ui horizontal divider header">
      <i class="bar chart icon"></i>
      Application metrics
    </h4>
    <table class="ui definition table">
      <tbody id="card-body-container">
        
      </tbody>
    </table>

</div>


</div>

<!-- All Audits of Projects -->
    <div class="main_content_iner ">
        <div class="container-fluid p-0">
            <div class="row justify-content-center">
                <div class="col-lg-12">
                    <div class="white_card card_height_100 mb_30">
                        <div class="white_card_header">
                            <div class="box_header m-0">
                                <div class="main-title">
                                    <h3 class="m-0">Audit table </h3>
                                </div>
                            </div>
                        </div>
                        <div class="white_card_body">
                            <div class="QA_section">
                                <div class="white_box_tittle list_header">
                                    
                                    <div class="box_right d-flex lms_block">
                                        <div class="serach_field_2">
                                            <div class="search_inner">
                                                <form Active="#">
                                                    <div class="search_field">
                                                        <input type="text" placeholder="Search content here...">
                                                    </div>
                                                    <button type="submit"> <i class="ti-search"></i> </button>
                                                </form>
                                            </div>
                                        </div>
                                        <div class="add_button ml-10">
                                            <a href="#" data-toggle="modal" data-target="#addcategory" class="btn_1">Search</a>
                                        </div>
                                    </div>
                                </div>
        
                                <div class="QA_table mb_30">
                                    <!-- table-responsive -->
                                    <table id = "audit-table" class="table lms_table_active3 ">
                                        <thead>
                                            <tr>
                                                <th scope="col">User</th>
                                                <th scope="col">Module</th>
                                                <th scope="col">Document</th>
                                                <th scope="col">Description</th>
                                                <th scope="col">Timestamp</th>
                                            </tr>
                                        </thead>
                                        <tbody id="audit_body">
                                            {% for audit in project_audits %}

                                            <tr>
                                                <td>
                                                    {{audit.userName}}
                                                </td>
                                                <td>{{audit.auditDocumentName}}</td>
                                                <td>{{audit.auditModuleName}}</td>
                                                <td>{{audit.operation}}</td>
                                                <td>{{audit.timestamp}}</td>

                                            </tr> 
                                            {% endfor %}

                                        </tbody>


                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% endblock %}
